<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Title Web</title>
    <link rel="stylesheet" href="./css/styles.css" />
  </head>
  <body>
    <h1>Hello world</h1>
    <button onclick="getListUser()">Get List User</button>
    <button onclick="postUser()">Post User</button>
    <button onclick="updateUser()">Update User</button>
    <button onclick="deleteUser()">Delete User</button>
    <div id="result">
      <div class="table-responsive"></div>
    </div>

    <script>
      // CRUD - R/C/U/D
      // button -> click -> log listUser call API
      function _renderListUser(listUser) {
        let contentBody = ``;
        listUser.map((user) => {
          contentBody += `<tr class="">
                      <td scope="row">${user.name}</td>
                      <td>${user.avatar}</td>
                    </tr>`;
        });
        let res = `
          <table class="table table-primary">
            <thead>
              <tr>
                <th scope="col">Name</th>
                <th scope="col">Avatar</th>
              </tr>
            </thead>
            <tbody>
              ${contentBody}
            </tbody>
          </table>
        `;

        let elm = document.getElementById("result");
        elm.innerHTML = res;
      }

      function getListUser() {
        let url = "https://63284e93a2e90dab7bdd0fd7.mockapi.io/api/v1/users";
        fetch(url, {
          method: "GET",
        })
          .then((response) => response.json())
          .then((data) => {
            _renderListUser(data);
          })
          .catch((error) => {
            console.error("Error:", error);
          });
      }
      function postUser() {
        let url = "https://63284e93a2e90dab7bdd0fd7.mockapi.io/api/v1/users";
        let data = {
          name: "new user",
          avatar:
            "https://cloudflare-ipfs.com/ipfs/Qmd3W5DuhgHirLHGVixi6V76LhCkZUz6pnFt5AJBiyvHye/avatar/1129.jpg",
        };
        fetch(url, {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
          },
          body: JSON.stringify(data),
        })
          .then((response) => response.json())
          .then((data) => {
            console.log(data);
          })
          .catch((error) => {
            console.error("Error:", error);
          });
      }
      function updateUser() {
        console.log("updateUser");
        let url = "https://63284e93a2e90dab7bdd0fd7.mockapi.io/api/v1/users/11";
        let data = {
          name: "update user",
          avatar:
            "https://cloudflare-ipfs.com/ipfs/Qmd3W5DuhgHirLHGVixi6V76LhCkZUz6pnFt5AJBiyvHye/avatar/1129.jpg",
        };
        fetch(url, {
          method: "PUT",
          headers: {
            "Content-Type": "application/json",
          },
          body: JSON.stringify(data),
        })
          .then((response) => response.json())
          .then((data) => {
            console.log(data);
          })
          .catch((error) => {
            console.error("Error:", error);
          });
      }
      function deleteUser() {
        let url = "https://63284e93a2e90dab7bdd0fd7.mockapi.io/api/v1/users/11";
        fetch(url, {
          method: "DELETE",
        })
          .then((response) => response.json())
          .then((data) => {
            console.log(data);
          })
          .catch((error) => {
            console.error("Error:", error);
          });
      }
    </script>
    <script src="./js/index.js"></script>
  </body>
</html>
